{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/Projects/realsense-restapi/realsense-react-client/src/pages/PointCloudDemo.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport * as THREE from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PointCloudDemo = () => {\n  _s();\n  const [apiUrl, setApiUrl] = useState('http://localhost:8000/api');\n  const [deviceId, setDeviceId] = useState('');\n  const [isViewerRunning, setIsViewerRunning] = useState(false);\n  const [connectionStatus, setConnectionStatus] = useState('Disconnected');\n  const [pointCloudStatus, setPointCloudStatus] = useState('Stopped');\n  const [vertexCount, setVertexCount] = useState(0);\n  const [fps, setFps] = useState(0);\n  const [log, setLog] = useState('');\n  const canvasRef = useRef(null);\n  const sceneRef = useRef(null);\n  const cameraRef = useRef(null);\n  const rendererRef = useRef(null);\n  const controlsRef = useRef(null);\n  const pointCloudRef = useRef(null);\n  const animationIdRef = useRef(null);\n  const frameCountRef = useRef(0);\n  const lastTimeRef = useRef(0);\n  const hasInitializedCameraRef = useRef(false);\n  const logMessage = useCallback(message => {\n    const timestamp = new Date().toLocaleTimeString();\n    setLog(prev => `[${timestamp}] ${message}\\n${prev}`);\n  }, []);\n  const initThreeJS = () => {\n    if (!canvasRef.current) return;\n\n    // Scene\n    const scene = new THREE.Scene();\n    scene.background = new THREE.Color(0x000000);\n    sceneRef.current = scene;\n\n    // Camera\n    const camera = new THREE.PerspectiveCamera(75, canvasRef.current.clientWidth / canvasRef.current.clientHeight, 0.1, 1000);\n    camera.position.set(0, 0, 5);\n    cameraRef.current = camera;\n\n    // Renderer\n    const renderer = new THREE.WebGLRenderer({\n      canvas: canvasRef.current,\n      antialias: true\n    });\n    renderer.setSize(canvasRef.current.clientWidth, canvasRef.current.clientHeight);\n    renderer.setPixelRatio(window.devicePixelRatio);\n    rendererRef.current = renderer;\n\n    // Controls\n    const controls = new OrbitControls(camera, renderer.domElement);\n    controls.enableDamping = true;\n    controls.dampingFactor = 0.05;\n    controls.screenSpacePanning = false;\n    controls.minDistance = 0.1;\n    controls.maxDistance = 100;\n    controlsRef.current = controls;\n\n    // Lighting\n    const ambientLight = new THREE.AmbientLight(0x404040, 0.6);\n    scene.add(ambientLight);\n    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);\n    directionalLight.position.set(1, 1, 1);\n    scene.add(directionalLight);\n\n    // Grid helper\n    const gridHelper = new THREE.GridHelper(10, 10);\n    scene.add(gridHelper);\n\n    // Axes helper\n    const axesHelper = new THREE.AxesHelper(1);\n    scene.add(axesHelper);\n    logMessage('Three.js initialized');\n  };\n  const updatePointCloud = async () => {\n    if (!isViewerRunning || !deviceId) return;\n    try {\n      logMessage(`Fetching point cloud data for device: ${deviceId}`);\n      const response = await axios.get(`${apiUrl}/webrtc/pointcloud-data/${deviceId}`);\n      const data = response.data;\n      logMessage(`Received data: ${JSON.stringify(data).substring(0, 200)}...`);\n      logMessage(`Data type: ${typeof data}, vertices type: ${typeof data.vertices}`);\n      if (!data.vertices || data.vertices.length === 0) {\n        logMessage('No vertices data found');\n        setPointCloudStatus('No data');\n        return;\n      }\n      logMessage(`Vertices array length: ${data.vertices.length}`);\n      const vertices = new Float32Array(data.vertices);\n      logMessage(`Float32Array length: ${vertices.length}, vertex count: ${vertices.length / 3}`);\n      setVertexCount(vertices.length / 3);\n\n      // Store current camera state\n      const currentCameraPosition = cameraRef.current.position.clone();\n      const currentTarget = controlsRef.current.target.clone();\n\n      // Remove existing point cloud\n      if (pointCloudRef.current) {\n        sceneRef.current.remove(pointCloudRef.current);\n        pointCloudRef.current.geometry.dispose();\n        pointCloudRef.current.material.dispose();\n      }\n\n      // Create new geometry\n      const geometry = new THREE.BufferGeometry();\n      geometry.setAttribute('position', new THREE.BufferAttribute(vertices, 3));\n      logMessage(`Created geometry with ${geometry.attributes.position.count} vertices`);\n\n      // Create material\n      const material = new THREE.PointsMaterial({\n        size: 0.02,\n        color: 0x00ff00,\n        transparent: true,\n        opacity: 0.8\n      });\n      logMessage('Created point cloud material');\n\n      // Create point cloud\n      const pointCloud = new THREE.Points(geometry, material);\n      sceneRef.current.add(pointCloud);\n      pointCloudRef.current = pointCloud;\n      logMessage(`Added point cloud to scene. Scene children count: ${sceneRef.current.children.length}`);\n\n      // Preserve camera state\n      if (!hasInitializedCameraRef.current) {\n        // Initial setup\n        cameraRef.current.position.set(0, 0, 2);\n        controlsRef.current.target.set(0, 0, 0);\n        hasInitializedCameraRef.current = true;\n      } else {\n        // Preserve user's view\n        cameraRef.current.position.copy(currentCameraPosition);\n        controlsRef.current.target.copy(currentTarget);\n      }\n      setPointCloudStatus('Streaming');\n      logMessage(`Updated point cloud with ${vertices.length / 3} vertices`);\n    } catch (error) {\n      logMessage(`Error updating point cloud: ${error.message}`);\n      setPointCloudStatus('Error');\n    }\n  };\n  const animate = currentTime => {\n    if (!isViewerRunning) return;\n    animationIdRef.current = requestAnimationFrame(animate);\n\n    // Calculate FPS\n    frameCountRef.current++;\n    if (currentTime - lastTimeRef.current >= 1000) {\n      setFps(frameCountRef.current);\n      frameCountRef.current = 0;\n      lastTimeRef.current = currentTime;\n    }\n\n    // Update controls\n    if (controlsRef.current) {\n      controlsRef.current.update();\n    }\n\n    // Render\n    if (rendererRef.current && sceneRef.current && cameraRef.current) {\n      rendererRef.current.render(sceneRef.current, cameraRef.current);\n    }\n  };\n  const startPointCloudViewer = async () => {\n    if (!deviceId) {\n      alert('Please enter a device ID');\n      return;\n    }\n    try {\n      // Initialize Three.js if not already done\n      if (!sceneRef.current) {\n        initThreeJS();\n      }\n\n      // Clear existing point cloud\n      if (pointCloudRef.current) {\n        sceneRef.current.remove(pointCloudRef.current);\n        pointCloudRef.current.geometry.dispose();\n        pointCloudRef.current.material.dispose();\n        pointCloudRef.current = null;\n      }\n      setIsViewerRunning(true);\n      setConnectionStatus('Connected');\n      setPointCloudStatus('Activating...');\n      logMessage('Starting 3D point cloud viewer...');\n\n      // Automatically activate point cloud processing\n      try {\n        logMessage('Activating point cloud processing...');\n        await axios.post(`${apiUrl}/devices/${deviceId}/point_cloud/activate`);\n        logMessage('Point cloud processing activated');\n\n        // Start a depth stream session to enable point cloud data\n        logMessage('Starting depth stream session...');\n        await axios.post(`${apiUrl}/devices/${deviceId}/stream/start`, {\n          configs: [{\n            sensor_id: `${deviceId}-sensor-0`,\n            stream_type: 'depth',\n            format: 'z16',\n            resolution: {\n              width: 640,\n              height: 480\n            },\n            framerate: 30\n          }]\n        });\n        logMessage('Depth stream session started');\n      } catch (error) {\n        logMessage(`Warning: ${error.message}`);\n      }\n\n      // Start animation loop\n      animate(0);\n\n      // Start point cloud updates\n      const updateInterval = setInterval(() => {\n        if (isViewerRunning) {\n          updatePointCloud();\n        } else {\n          clearInterval(updateInterval);\n        }\n      }, 1000);\n      logMessage('3D point cloud viewer started successfully');\n    } catch (error) {\n      logMessage(`Failed to start 3D viewer: ${error.message}`);\n      setConnectionStatus('Error');\n      setPointCloudStatus('Error');\n    }\n  };\n  const stopPointCloudViewer = async () => {\n    setIsViewerRunning(false);\n    setConnectionStatus('Disconnected');\n    setPointCloudStatus('Stopped');\n    setVertexCount(0);\n    setFps(0);\n    if (animationIdRef.current) {\n      cancelAnimationFrame(animationIdRef.current);\n      animationIdRef.current = null;\n    }\n\n    // Clear existing point cloud\n    if (pointCloudRef.current) {\n      sceneRef.current.remove(pointCloudRef.current);\n      pointCloudRef.current.geometry.dispose();\n      pointCloudRef.current.material.dispose();\n      pointCloudRef.current = null;\n    }\n\n    // Reset camera initialization flag\n    hasInitializedCameraRef.current = false;\n\n    // Clean up depth session if it exists\n    if (deviceId) {\n      try {\n        logMessage('Cleaning up depth session...');\n        await axios.post(`${apiUrl}/devices/${deviceId}/stream/stop`);\n        logMessage('Depth session cleaned up');\n      } catch (error) {\n        logMessage(`Warning: Failed to clean up depth session: ${error.message}`);\n      }\n    }\n    logMessage('3D point cloud viewer stopped');\n  };\n  const discoverDevices = useCallback(async () => {\n    try {\n      logMessage('Discovering devices...');\n      logMessage(`Making request to: ${apiUrl}/devices/`);\n      const response = await axios.get(`${apiUrl}/devices/`);\n      logMessage(`Response status: ${response.status}`);\n      logMessage(`Response data: ${JSON.stringify(response.data)}`);\n      const devices = response.data;\n      if (devices.length > 0) {\n        setDeviceId(devices[0].device_id);\n        logMessage(`Found ${devices.length} device(s): ${devices.map(d => d.device_id).join(', ')}`);\n      } else {\n        logMessage('No devices found');\n      }\n    } catch (error) {\n      var _error$response;\n      logMessage(`Failed to discover devices: ${error.message}`);\n      logMessage(`Error details: ${JSON.stringify(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error)}`);\n    }\n  }, [apiUrl, logMessage]);\n  const handleKeyPress = useCallback(event => {\n    if (event.key === 'r' || event.key === 'R') {\n      // Reset camera\n      if (cameraRef.current && controlsRef.current) {\n        cameraRef.current.position.set(0, 0, 2);\n        controlsRef.current.target.set(0, 0, 0);\n        hasInitializedCameraRef.current = true;\n        logMessage('Camera reset to initial position');\n      }\n    }\n  }, [logMessage]);\n  useEffect(() => {\n    discoverDevices();\n    window.addEventListener('keydown', handleKeyPress);\n    return () => {\n      window.removeEventListener('keydown', handleKeyPress);\n      if (animationIdRef.current) {\n        cancelAnimationFrame(animationIdRef.current);\n      }\n    };\n  }, [discoverDevices, handleKeyPress]);\n  useEffect(() => {\n    const handleResize = () => {\n      if (canvasRef.current && cameraRef.current && rendererRef.current) {\n        const width = canvasRef.current.clientWidth;\n        const height = canvasRef.current.clientHeight;\n        cameraRef.current.aspect = width / height;\n        cameraRef.current.updateProjectionMatrix();\n        rendererRef.current.setSize(width, height);\n      }\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83C\\uDFAF RealSense 3D Point Cloud Viewer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Interactive 3D visualization of RealSense depth data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"apiUrl\",\n          children: \"API URL:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"apiUrl\",\n          value: apiUrl,\n          onChange: e => setApiUrl(e.target.value),\n          placeholder: \"Enter API URL\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"deviceId\",\n          children: \"Device ID:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"deviceId\",\n          value: deviceId,\n          onChange: e => setDeviceId(e.target.value),\n          placeholder: \"e.g., 844212070924\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: discoverDevices,\n          className: \"button\",\n          children: \"\\uD83D\\uDD0D Discover Devices\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startPointCloudViewer,\n          className: \"button success\",\n          disabled: isViewerRunning,\n          children: \"\\u25B6\\uFE0F Start 3D Viewer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: stopPointCloudViewer,\n          className: \"button danger\",\n          disabled: !isViewerRunning,\n          children: \"\\u23F9\\uFE0F Stop Viewer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status info\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Connection:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 19\n            }, this), \" \", connectionStatus]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Point Cloud:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 19\n            }, this), \" \", pointCloudStatus]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Vertices:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 19\n            }, this), \" \", vertexCount.toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"FPS:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 19\n            }, this), \" \", fps]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83C\\uDFAE 3D Viewer Controls\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sessions-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Mouse Controls:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Left Click + Drag:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 17\n            }, this), \" Rotate camera around target\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Right Click + Drag:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 17\n            }, this), \" Pan camera\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Scroll Wheel:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 17\n            }, this), \" Zoom in/out\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"R Key:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 17\n            }, this), \" Reset camera to initial position\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83C\\uDFA5 3D Point Cloud Viewer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'rgba(0, 0, 0, 0.8)',\n          borderRadius: '15px',\n          padding: '20px',\n          height: '600px',\n          position: 'relative',\n          overflow: 'hidden'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          style: {\n            width: '100%',\n            height: '100%',\n            borderRadius: '10px',\n            display: 'block'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 11\n        }, this), !isViewerRunning && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '50%',\n            left: '50%',\n            transform: 'translate(-50%, -50%)',\n            fontSize: '18px',\n            color: '#ffd700'\n          },\n          children: \"Click \\\"Start 3D Viewer\\\" to begin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 13\n        }, this), isViewerRunning && vertexCount > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '20px',\n            right: '20px',\n            background: 'rgba(0, 0, 0, 0.7)',\n            padding: '10px',\n            borderRadius: '8px',\n            fontSize: '14px',\n            color: 'white'\n          },\n          children: [\"Points: \", vertexCount.toLocaleString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDCDD Connection Log\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"log\",\n        children: log\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 355,\n    columnNumber: 5\n  }, this);\n};\n_s(PointCloudDemo, \"J1sQP4tV9vsl/TJ5RJulum+ZoHI=\");\n_c = PointCloudDemo;\nexport default PointCloudDemo;\nvar _c;\n$RefreshReg$(_c, \"PointCloudDemo\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","THREE","OrbitControls","axios","jsxDEV","_jsxDEV","PointCloudDemo","_s","apiUrl","setApiUrl","deviceId","setDeviceId","isViewerRunning","setIsViewerRunning","connectionStatus","setConnectionStatus","pointCloudStatus","setPointCloudStatus","vertexCount","setVertexCount","fps","setFps","log","setLog","canvasRef","sceneRef","cameraRef","rendererRef","controlsRef","pointCloudRef","animationIdRef","frameCountRef","lastTimeRef","hasInitializedCameraRef","logMessage","message","timestamp","Date","toLocaleTimeString","prev","initThreeJS","current","scene","Scene","background","Color","camera","PerspectiveCamera","clientWidth","clientHeight","position","set","renderer","WebGLRenderer","canvas","antialias","setSize","setPixelRatio","window","devicePixelRatio","controls","domElement","enableDamping","dampingFactor","screenSpacePanning","minDistance","maxDistance","ambientLight","AmbientLight","add","directionalLight","DirectionalLight","gridHelper","GridHelper","axesHelper","AxesHelper","updatePointCloud","response","get","data","JSON","stringify","substring","vertices","length","Float32Array","currentCameraPosition","clone","currentTarget","target","remove","geometry","dispose","material","BufferGeometry","setAttribute","BufferAttribute","attributes","count","PointsMaterial","size","color","transparent","opacity","pointCloud","Points","children","copy","error","animate","currentTime","requestAnimationFrame","update","render","startPointCloudViewer","alert","post","configs","sensor_id","stream_type","format","resolution","width","height","framerate","updateInterval","setInterval","clearInterval","stopPointCloudViewer","cancelAnimationFrame","discoverDevices","status","devices","device_id","map","d","join","_error$response","handleKeyPress","event","key","addEventListener","removeEventListener","handleResize","aspect","updateProjectionMatrix","className","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","type","id","value","onChange","e","placeholder","onClick","disabled","style","display","justifyContent","alignItems","toLocaleString","borderRadius","padding","overflow","ref","top","left","transform","fontSize","right","_c","$RefreshReg$"],"sources":["/home/ubuntu/Projects/realsense-restapi/realsense-react-client/src/pages/PointCloudDemo.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport * as THREE from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport axios from 'axios';\n\nconst PointCloudDemo = () => {\n  const [apiUrl, setApiUrl] = useState('http://localhost:8000/api');\n  const [deviceId, setDeviceId] = useState('');\n  const [isViewerRunning, setIsViewerRunning] = useState(false);\n  const [connectionStatus, setConnectionStatus] = useState('Disconnected');\n  const [pointCloudStatus, setPointCloudStatus] = useState('Stopped');\n  const [vertexCount, setVertexCount] = useState(0);\n  const [fps, setFps] = useState(0);\n  const [log, setLog] = useState('');\n\n  const canvasRef = useRef(null);\n  const sceneRef = useRef(null);\n  const cameraRef = useRef(null);\n  const rendererRef = useRef(null);\n  const controlsRef = useRef(null);\n  const pointCloudRef = useRef(null);\n  const animationIdRef = useRef(null);\n  const frameCountRef = useRef(0);\n  const lastTimeRef = useRef(0);\n  const hasInitializedCameraRef = useRef(false);\n\n  const logMessage = useCallback((message) => {\n    const timestamp = new Date().toLocaleTimeString();\n    setLog(prev => `[${timestamp}] ${message}\\n${prev}`);\n  }, []);\n\n  const initThreeJS = () => {\n    if (!canvasRef.current) return;\n\n    // Scene\n    const scene = new THREE.Scene();\n    scene.background = new THREE.Color(0x000000);\n    sceneRef.current = scene;\n\n    // Camera\n    const camera = new THREE.PerspectiveCamera(\n      75,\n      canvasRef.current.clientWidth / canvasRef.current.clientHeight,\n      0.1,\n      1000\n    );\n    camera.position.set(0, 0, 5);\n    cameraRef.current = camera;\n\n    // Renderer\n    const renderer = new THREE.WebGLRenderer({ \n      canvas: canvasRef.current,\n      antialias: true \n    });\n    renderer.setSize(canvasRef.current.clientWidth, canvasRef.current.clientHeight);\n    renderer.setPixelRatio(window.devicePixelRatio);\n    rendererRef.current = renderer;\n\n    // Controls\n    const controls = new OrbitControls(camera, renderer.domElement);\n    controls.enableDamping = true;\n    controls.dampingFactor = 0.05;\n    controls.screenSpacePanning = false;\n    controls.minDistance = 0.1;\n    controls.maxDistance = 100;\n    controlsRef.current = controls;\n\n    // Lighting\n    const ambientLight = new THREE.AmbientLight(0x404040, 0.6);\n    scene.add(ambientLight);\n\n    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);\n    directionalLight.position.set(1, 1, 1);\n    scene.add(directionalLight);\n\n    // Grid helper\n    const gridHelper = new THREE.GridHelper(10, 10);\n    scene.add(gridHelper);\n\n    // Axes helper\n    const axesHelper = new THREE.AxesHelper(1);\n    scene.add(axesHelper);\n\n    logMessage('Three.js initialized');\n  };\n\n  const updatePointCloud = async () => {\n    if (!isViewerRunning || !deviceId) return;\n\n    try {\n      logMessage(`Fetching point cloud data for device: ${deviceId}`);\n      const response = await axios.get(`${apiUrl}/webrtc/pointcloud-data/${deviceId}`);\n      const data = response.data;\n\n      logMessage(`Received data: ${JSON.stringify(data).substring(0, 200)}...`);\n      logMessage(`Data type: ${typeof data}, vertices type: ${typeof data.vertices}`);\n\n      if (!data.vertices || data.vertices.length === 0) {\n        logMessage('No vertices data found');\n        setPointCloudStatus('No data');\n        return;\n      }\n\n      logMessage(`Vertices array length: ${data.vertices.length}`);\n      const vertices = new Float32Array(data.vertices);\n      logMessage(`Float32Array length: ${vertices.length}, vertex count: ${vertices.length / 3}`);\n      setVertexCount(vertices.length / 3);\n\n      // Store current camera state\n      const currentCameraPosition = cameraRef.current.position.clone();\n      const currentTarget = controlsRef.current.target.clone();\n\n      // Remove existing point cloud\n      if (pointCloudRef.current) {\n        sceneRef.current.remove(pointCloudRef.current);\n        pointCloudRef.current.geometry.dispose();\n        pointCloudRef.current.material.dispose();\n      }\n\n      // Create new geometry\n      const geometry = new THREE.BufferGeometry();\n      geometry.setAttribute('position', new THREE.BufferAttribute(vertices, 3));\n      logMessage(`Created geometry with ${geometry.attributes.position.count} vertices`);\n\n      // Create material\n      const material = new THREE.PointsMaterial({\n        size: 0.02,\n        color: 0x00ff00,\n        transparent: true,\n        opacity: 0.8\n      });\n      logMessage('Created point cloud material');\n\n      // Create point cloud\n      const pointCloud = new THREE.Points(geometry, material);\n      sceneRef.current.add(pointCloud);\n      pointCloudRef.current = pointCloud;\n      logMessage(`Added point cloud to scene. Scene children count: ${sceneRef.current.children.length}`);\n\n      // Preserve camera state\n      if (!hasInitializedCameraRef.current) {\n        // Initial setup\n        cameraRef.current.position.set(0, 0, 2);\n        controlsRef.current.target.set(0, 0, 0);\n        hasInitializedCameraRef.current = true;\n      } else {\n        // Preserve user's view\n        cameraRef.current.position.copy(currentCameraPosition);\n        controlsRef.current.target.copy(currentTarget);\n      }\n\n      setPointCloudStatus('Streaming');\n      logMessage(`Updated point cloud with ${vertices.length / 3} vertices`);\n\n    } catch (error) {\n      logMessage(`Error updating point cloud: ${error.message}`);\n      setPointCloudStatus('Error');\n    }\n  };\n\n  const animate = (currentTime) => {\n    if (!isViewerRunning) return;\n\n    animationIdRef.current = requestAnimationFrame(animate);\n\n    // Calculate FPS\n    frameCountRef.current++;\n    if (currentTime - lastTimeRef.current >= 1000) {\n      setFps(frameCountRef.current);\n      frameCountRef.current = 0;\n      lastTimeRef.current = currentTime;\n    }\n\n    // Update controls\n    if (controlsRef.current) {\n      controlsRef.current.update();\n    }\n\n    // Render\n    if (rendererRef.current && sceneRef.current && cameraRef.current) {\n      rendererRef.current.render(sceneRef.current, cameraRef.current);\n    }\n  };\n\n  const startPointCloudViewer = async () => {\n    if (!deviceId) {\n      alert('Please enter a device ID');\n      return;\n    }\n\n    try {\n      // Initialize Three.js if not already done\n      if (!sceneRef.current) {\n        initThreeJS();\n      }\n\n      // Clear existing point cloud\n      if (pointCloudRef.current) {\n        sceneRef.current.remove(pointCloudRef.current);\n        pointCloudRef.current.geometry.dispose();\n        pointCloudRef.current.material.dispose();\n        pointCloudRef.current = null;\n      }\n\n      setIsViewerRunning(true);\n      setConnectionStatus('Connected');\n      setPointCloudStatus('Activating...');\n      logMessage('Starting 3D point cloud viewer...');\n\n      // Automatically activate point cloud processing\n      try {\n        logMessage('Activating point cloud processing...');\n        await axios.post(`${apiUrl}/devices/${deviceId}/point_cloud/activate`);\n        logMessage('Point cloud processing activated');\n\n        // Start a depth stream session to enable point cloud data\n        logMessage('Starting depth stream session...');\n        await axios.post(`${apiUrl}/devices/${deviceId}/stream/start`, {\n          configs: [{\n            sensor_id: `${deviceId}-sensor-0`,\n            stream_type: 'depth',\n            format: 'z16',\n            resolution: { width: 640, height: 480 },\n            framerate: 30\n          }]\n        });\n        logMessage('Depth stream session started');\n\n      } catch (error) {\n        logMessage(`Warning: ${error.message}`);\n      }\n\n      // Start animation loop\n      animate(0);\n\n      // Start point cloud updates\n      const updateInterval = setInterval(() => {\n        if (isViewerRunning) {\n          updatePointCloud();\n        } else {\n          clearInterval(updateInterval);\n        }\n      }, 1000);\n\n      logMessage('3D point cloud viewer started successfully');\n\n    } catch (error) {\n      logMessage(`Failed to start 3D viewer: ${error.message}`);\n      setConnectionStatus('Error');\n      setPointCloudStatus('Error');\n    }\n  };\n\n  const stopPointCloudViewer = async () => {\n    setIsViewerRunning(false);\n    setConnectionStatus('Disconnected');\n    setPointCloudStatus('Stopped');\n    setVertexCount(0);\n    setFps(0);\n\n    if (animationIdRef.current) {\n      cancelAnimationFrame(animationIdRef.current);\n      animationIdRef.current = null;\n    }\n\n    // Clear existing point cloud\n    if (pointCloudRef.current) {\n      sceneRef.current.remove(pointCloudRef.current);\n      pointCloudRef.current.geometry.dispose();\n      pointCloudRef.current.material.dispose();\n      pointCloudRef.current = null;\n    }\n\n    // Reset camera initialization flag\n    hasInitializedCameraRef.current = false;\n\n    // Clean up depth session if it exists\n    if (deviceId) {\n      try {\n        logMessage('Cleaning up depth session...');\n        await axios.post(`${apiUrl}/devices/${deviceId}/stream/stop`);\n        logMessage('Depth session cleaned up');\n      } catch (error) {\n        logMessage(`Warning: Failed to clean up depth session: ${error.message}`);\n      }\n    }\n\n    logMessage('3D point cloud viewer stopped');\n  };\n\n  const discoverDevices = useCallback(async () => {\n    try {\n      logMessage('Discovering devices...');\n      logMessage(`Making request to: ${apiUrl}/devices/`);\n      \n      const response = await axios.get(`${apiUrl}/devices/`);\n      logMessage(`Response status: ${response.status}`);\n      logMessage(`Response data: ${JSON.stringify(response.data)}`);\n      \n      const devices = response.data;\n      \n      if (devices.length > 0) {\n        setDeviceId(devices[0].device_id);\n        logMessage(`Found ${devices.length} device(s): ${devices.map(d => d.device_id).join(', ')}`);\n      } else {\n        logMessage('No devices found');\n      }\n    } catch (error) {\n      logMessage(`Failed to discover devices: ${error.message}`);\n      logMessage(`Error details: ${JSON.stringify(error.response?.data || error)}`);\n    }\n  }, [apiUrl, logMessage]);\n\n  const handleKeyPress = useCallback((event) => {\n    if (event.key === 'r' || event.key === 'R') {\n      // Reset camera\n      if (cameraRef.current && controlsRef.current) {\n        cameraRef.current.position.set(0, 0, 2);\n        controlsRef.current.target.set(0, 0, 0);\n        hasInitializedCameraRef.current = true;\n        logMessage('Camera reset to initial position');\n      }\n    }\n  }, [logMessage]);\n\n  useEffect(() => {\n    discoverDevices();\n    window.addEventListener('keydown', handleKeyPress);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyPress);\n      if (animationIdRef.current) {\n        cancelAnimationFrame(animationIdRef.current);\n      }\n    };\n  }, [discoverDevices, handleKeyPress]);\n\n  useEffect(() => {\n    const handleResize = () => {\n      if (canvasRef.current && cameraRef.current && rendererRef.current) {\n        const width = canvasRef.current.clientWidth;\n        const height = canvasRef.current.clientHeight;\n\n        cameraRef.current.aspect = width / height;\n        cameraRef.current.updateProjectionMatrix();\n        rendererRef.current.setSize(width, height);\n      }\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return (\n    <div>\n      <div className=\"container\">\n        <h2>🎯 RealSense 3D Point Cloud Viewer</h2>\n        <p>Interactive 3D visualization of RealSense depth data</p>\n        \n        <div className=\"form-group\">\n          <label htmlFor=\"apiUrl\">API URL:</label>\n          <input\n            type=\"text\"\n            id=\"apiUrl\"\n            value={apiUrl}\n            onChange={(e) => setApiUrl(e.target.value)}\n            placeholder=\"Enter API URL\"\n          />\n        </div>\n        \n        <div className=\"form-group\">\n          <label htmlFor=\"deviceId\">Device ID:</label>\n          <input\n            type=\"text\"\n            id=\"deviceId\"\n            value={deviceId}\n            onChange={(e) => setDeviceId(e.target.value)}\n            placeholder=\"e.g., 844212070924\"\n          />\n        </div>\n        \n        <div>\n          <button onClick={discoverDevices} className=\"button\">\n            🔍 Discover Devices\n          </button>\n          <button \n            onClick={startPointCloudViewer} \n            className=\"button success\"\n            disabled={isViewerRunning}\n          >\n            ▶️ Start 3D Viewer\n          </button>\n          <button \n            onClick={stopPointCloudViewer} \n            className=\"button danger\"\n            disabled={!isViewerRunning}\n          >\n            ⏹️ Stop Viewer\n          </button>\n        </div>\n\n        <div className=\"status info\">\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n            <span><strong>Connection:</strong> {connectionStatus}</span>\n            <span><strong>Point Cloud:</strong> {pointCloudStatus}</span>\n            <span><strong>Vertices:</strong> {vertexCount.toLocaleString()}</span>\n            <span><strong>FPS:</strong> {fps}</span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"container\">\n        <h2>🎮 3D Viewer Controls</h2>\n        <div className=\"sessions-panel\">\n          <h3>Mouse Controls:</h3>\n          <ul>\n            <li><strong>Left Click + Drag:</strong> Rotate camera around target</li>\n            <li><strong>Right Click + Drag:</strong> Pan camera</li>\n            <li><strong>Scroll Wheel:</strong> Zoom in/out</li>\n            <li><strong>R Key:</strong> Reset camera to initial position</li>\n          </ul>\n        </div>\n      </div>\n\n      <div className=\"container\">\n        <h2>🎥 3D Point Cloud Viewer</h2>\n        <div style={{ \n          background: 'rgba(0, 0, 0, 0.8)', \n          borderRadius: '15px', \n          padding: '20px', \n          height: '600px', \n          position: 'relative', \n          overflow: 'hidden' \n        }}>\n          <canvas\n            ref={canvasRef}\n            style={{\n              width: '100%',\n              height: '100%',\n              borderRadius: '10px',\n              display: 'block'\n            }}\n          />\n          {!isViewerRunning && (\n            <div style={{\n              position: 'absolute',\n              top: '50%',\n              left: '50%',\n              transform: 'translate(-50%, -50%)',\n              fontSize: '18px',\n              color: '#ffd700'\n            }}>\n              Click \"Start 3D Viewer\" to begin\n            </div>\n          )}\n          {isViewerRunning && vertexCount > 0 && (\n            <div style={{\n              position: 'absolute',\n              top: '20px',\n              right: '20px',\n              background: 'rgba(0, 0, 0, 0.7)',\n              padding: '10px',\n              borderRadius: '8px',\n              fontSize: '14px',\n              color: 'white'\n            }}>\n              Points: {vertexCount.toLocaleString()}\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className=\"container\">\n        <h2>📝 Connection Log</h2>\n        <div className=\"log\">{log}</div>\n      </div>\n    </div>\n  );\n};\n\nexport default PointCloudDemo;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}